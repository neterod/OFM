!function(){"use strict";var s=require("gulp"),e=require("gulp-uglify"),r=require("gulp-less"),i=require("gulp-csslint"),p=require("gulp-csslint-less-reporter"),t=require("browser-sync").create(),c=require("gulp-htmlmin"),o=require("gulp-jshint"),n=require("gulp-jscs"),l=require("gulp-notify"),a=require("gulp-nunjucks"),u=require("gulp-concat"),j=require("gulp-imagemin"),m=require("gulp-rename"),g=require("gulp-sourcemaps"),b=require("gulp-whitespace"),f=require("gulp-cached"),h=require("gulp-remember"),q="../dist",d=q+"/js",y=["../src/js/jquery/jquery-1.11.2.min.js","../src/js/jquery/jquery.flexslider.js","../src/js/jquery/jquery.printElement.js"],k=d,v="jquery.min.js",w=["../src/js/bootstrap/affix.js","../src/js/bootstrap/alert.js","../src/js/bootstrap/button.js","../src/js/bootstrap/carousel.js","../src/js/bootstrap/collapse.js","../src/js/bootstrap/dropdown.js","../src/js/bootstrap/modal.js","../src/js/bootstrap/scrollspy.js","../src/js/bootstrap/tab.js","../src/js/bootstrap/transition.js"],E=d,S="bootstrap.min.js",x=["../src/js/ie/html5shiv.min.js","../src/js/ie/respond.min.js"],J=d,C="ie.min.js",D=["../src/js/plugins/accessibility-nav.js","../src/js/plugins/mobile-nav-height.js","../src/js/plugins/convert-svg-inline.js","../src/js/plugins/mobile-tables.js","../src/js/main.js"],H=d,T=["../src/js/plugins/mobile-nav-height.js","../src/js/main.js"],W="../src/less/bootstrap/bootstrap.less",z="../src/less/main.less",A=q+"/css/";s.task("compresslibraries",function(){s.src(y).pipe(u(v)).pipe(e()).pipe(s.dest(k)),s.src(w).pipe(u(S)).pipe(e()).pipe(s.dest(E)),s.src(x).pipe(u(C)).pipe(e()).pipe(s.dest(J))}),s.task("compressjs",["lint","jscs"],function(){s.src(D).pipe(g.init()).pipe(h("compressfiles")).pipe(u("main.min.js")).pipe(e({mangle:!1})).pipe(g.write("./")).pipe(s.dest(H))}),s.task("compileimages",function(){return s.src("../src/images/*").pipe(j()).pipe(s.dest("../dist/images"))}),s.task("jscs",function(){return s.src(T).pipe(b({removeTrailing:!0})).pipe(n()).pipe(n.reporter()).pipe(n.reporter("fail")).on("error",l.onError({message:"JSCS failed."}))}),s.task("lint",function(){return s.src(T).pipe(o(".jshintrc")).pipe(o.reporter("jshint-stylish")).pipe(o.reporter("fail")).on("error",l.onError({message:"JSHint failed."}))}),s.task("compilecss",function(){return s.src(z).pipe(h("lessfiles")).pipe(g.init()).pipe(m("main.min.css")).pipe(r({compress:!0})).pipe(i("../src/less/.csslintrc")).pipe(p()).pipe(g.write("./")).pipe(s.dest(A))}),s.task("compilecssbootstrap",function(){return s.src(W).pipe(r({compress:!0})).pipe(m("bootstrap.min.css")).pipe(s.dest(A))}),s.task("minifyhtml",function(){return s.src("../src/*.html").pipe(a.compile()).pipe(c({collapseWhitespace:!0})).pipe(s.dest(q))}),s.task("server",[],function(){f.caches={},t.init({server:{baseDir:q},open:!1}),t.watch(A+"*.css",function(s,e){"change"===s&&t.reload(A+"*.css")}),s.watch("../src/less/*.less",["compilecss"]),s.watch("../src/less/bootstrap/*.less",["compilecssbootstrap"]),s.watch(D,["jscs","lint","compressjs"]),s.watch("../src/**/*.html",["minifyhtml"]),s.watch([q+"/*.html",H+"/*.js"]).on("change",t.reload)}),s.task("default",["server","jscs","compileimages","compressjs","compilecss","compilecssbootstrap","compresslibraries"])}();