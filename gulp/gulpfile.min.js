!function(){"use strict";var e=require("gulp"),a=require("gulp-uglify"),n=require("gulp-less"),i=require("gulp-csslint"),t=require("gulp-csslint-less-reporter"),o=require("browser-sync").create(),l=(require("gulp-htmlmin"),require("gulp-jshint")),r=require("gulp-jscs"),c=require("gulp-notify"),f=require("gulp-nunjucks"),d=require("gulp-concat"),h=require("gulp-imagemin"),p=require("gulp-rename"),u=require("gulp-sourcemaps"),v=require("gulp-whitespace"),b=require("gulp-cached"),g=require("gulp-remember"),m="../dist",w=m+"/js",x=["../src/js/jquery/jquery-1.11.2.min.js","../src/js/jquery/jquery.flexslider.js"],$=w,k="jquery.min.js",C=["../src/js/bootstrap/affix.js","../src/js/bootstrap/alert.js","../src/js/bootstrap/button.js","../src/js/bootstrap/collapse.js","../src/js/bootstrap/dropdown.js","../src/js/bootstrap/modal.js","../src/js/bootstrap/scrollspy.js","../src/js/bootstrap/tab.js","../src/js/bootstrap/transition.js"],y=w,D="bootstrap.min.js",P=["../src/js/ie/html5shiv.min.js","../src/js/ie/respond.min.js"],M=w,E="ie.min.js",T=["../src/js/plugins/mobile-nav-height.js","../src/js/plugins/convert-svg-inline.js","../src/js/plugins/mobile-tables.js","../src/js/main.js"],S=w,j=["../src/js/plugins/mobile-nav-height.js","../src/js/main.js"],A="../src/less/bootstrap/bootstrap.less",O="../src/less/main.less",R=m+"/css/";e.task("compresslibraries",function(){e.src(x).pipe(d(k)).pipe(a()).pipe(e.dest($)),e.src(C).pipe(d(D)).pipe(a()).pipe(e.dest(y)),e.src(P).pipe(d(E)).pipe(a()).pipe(e.dest(M))}),e.task("compressjs",["lint","jscs"],function(){e.src(T).pipe(u.init()).pipe(g("compressfiles")).pipe(d("main.min.js")).pipe(a({mangle:!1})).pipe(u.write("./")).pipe(e.dest(S))}),e.task("compileimages",function(){return e.src("../src/images/*").pipe(h()).pipe(e.dest("../dist/images"))}),e.task("jscs",function(){return e.src(j).pipe(v({removeTrailing:!0})).pipe(r()).pipe(r.reporter()).pipe(r.reporter("fail")).on("error",c.onError({message:"JSCS failed."}))}),e.task("lint",function(){return e.src(j).pipe(l(".jshintrc")).pipe(l.reporter("jshint-stylish")).pipe(l.reporter("fail")).on("error",c.onError({message:"JSHint failed."}))}),e.task("compilecss",function(){return e.src(O).pipe(g("lessfiles")).pipe(u.init()).pipe(p("main.min.css")).pipe(n({compress:!0})).pipe(i("../src/less/.csslintrc")).pipe(t()).pipe(u.write("./")).pipe(e.dest(R))}),e.task("compilecssbootstrap",function(){return e.src(A).pipe(n({compress:!0})).pipe(p("bootstrap.min.css")).pipe(e.dest(R))}),e.task("minifyhtml",function(){return e.src("../src/*.html").pipe(f.compile()).pipe(e.dest(m))}),e.task("server",[],function(){b.caches={},o.init({server:{baseDir:m},open:!1}),o.watch(R+"*.css",function(e,a){"change"===e&&o.reload(R+"*.css")}),e.watch("../src/less/*.less",["compilecss"]),e.watch("../src/less/bootstrap/*.less",["compilecssbootstrap"]),e.watch(T,["jscs","lint","compressjs"]),e.watch("../src/**/*.html",["minifyhtml"]),e.watch([m+"/*.html",S+"/*.js"]).on("change",o.reload)}),e.task("default",["server","jscs","compileimages","compressjs","compilecss","minifyhtml","compilecssbootstrap","compresslibraries"])}();